<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout :: header(~{::title})">
	<title>Management: Schedule</title>
</head>
<body>

<!-- Change auditorium form modal -->
<div class="modal fade" id="change-auditorium-modal" tabindex="-1" role="dialog"
     aria-labelledby="change-auditorium-label" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">

			<!--Header-->
			<div class="modal-header">
				<h5 id="change-auditorium-label" class="modal-title">
					<i class="fas fa-angle-double-right"></i>
					Change auditorium
				</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>

			<!--Body-->
			<div class="modal-body">

				<p>Pick from the list of available auditoriums to move this schedule occurrence (one-time change).</p>

				<form class="needs-validation" action="#" th:action="@{/timetable/management/schedule/available}"
				      th:object="${changeScheduleForm}" method="post" novalidate>

					<div class="container">

						<div class="form-group row align-items-center">
							<label class="form-control-label col-sm-4" for="new-auditorium">New auditorium:</label>
							<div class="col-sm-8">
								<select class="custom-select" id="new-auditorium" name="auditoriumId" required>
									<option value="" hidden disabled selected>Select new auditorium...</option>
									<option th:each="auditorium : ${auditoriums}" value="1" th:value="${auditorium.id}"
									        th:text="${auditorium.name}">G-01
									</option>
								</select>
								<div class="invalid-feedback">Auditorium required</div>
							</div>
						</div>

						<input type="hidden" name="scheduleId" value="" th:value="${schedule.id}">

						<!--Submit-->

						<div class="modal-footer">
							<button type="submit" class="btn btn-outline-primary">Move</button>
						</div>

					</div>
				</form>
			</div>

		</div>
	</div>
</div>

<!-- Substitute professor form modal -->
<div class="modal fade" id="substitute-professor-modal" tabindex="-1" role="dialog"
     aria-labelledby="substitute-professor-label" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">

			<!--Header-->
			<div class="modal-header">
				<h5 id="substitute-professor-label" class="modal-title">
					<i class="fas fa-chalkboard-teacher"></i>
					Substitute professor
				</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>

			<!--Body-->
			<div class="modal-body">

				<p>Pick from the list of available professors to substitute this schedule occurrence (one-time change).</p>

				<form class="needs-validation" action="#" th:action="@{/timetable/management/schedule/available}"
				      th:object="${changeScheduleForm}" method="post" novalidate>

					<div class="container">

						<div class="form-group row align-items-center">
							<label class="form-control-label col-sm-4" for="new-professor">New professor:</label>
							<div class="col-sm-8">
								<select class="custom-select" id="new-professor" name="professorId" required>
									<option value="" hidden disabled selected>Select new professor...</option>
									<option th:each="professor : ${professors}" value="1" th:value="${professor.id}"
									        th:text="${professor.fullName}">Professor name
									</option>
								</select>
								<div class="invalid-feedback">Professor required</div>
							</div>
						</div>

						<input type="hidden" name="scheduleId" value="" th:value="${schedule.id}">

						<!--Submit-->

						<div class="modal-footer">
							<button type="submit" class="btn btn-outline-primary">Substitute</button>
						</div>

					</div>
				</form>
			</div>

		</div>
	</div>
</div>

<!-- Change professor and auditorium form modal -->
<div class="modal fade" id="change-schedule-modal" tabindex="-1" role="dialog"
     aria-labelledby="change-schedule-label" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">

			<!--Header-->
			<div class="modal-header">
				<h5 id="change-schedule-label" class="modal-title">
					<i class="fas fa-edit"></i>
					Change professor and auditorium
				</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>

			<!--Body-->
			<div class="modal-body">

				<p>Pick from the list of available professors and auditoriums to edit this schedule occurrence (one-time
					change).</p>

				<form class="needs-validation" action="#" th:action="@{/timetable/management/schedule/available}"
				      th:object="${changeScheduleForm}" method="post" novalidate>

					<div class="container">

						<div class="form-group row align-items-center">
							<label class="form-control-label col-sm-4" for="new-professor">New professor:</label>
							<div class="col-sm-8">
								<select class="custom-select" id="new-professor" name="professorId" required>
									<option value="" hidden disabled selected>Select new professor...</option>
									<option th:each="professor : ${professors}" value="1" th:value="${professor.id}"
									        th:text="${professor.fullName}">Professor name
									</option>
								</select>
								<div class="invalid-feedback">Professor required</div>
							</div>
						</div>

						<div class="form-group row align-items-center">
							<label class="form-control-label col-sm-4" for="new-auditorium">New auditorium:</label>
							<div class="col-sm-8">
								<select class="custom-select" id="new-auditorium" name="auditoriumId" required>
									<option value="" hidden disabled selected>Select new auditorium...</option>
									<option th:each="auditorium : ${auditoriums}" value="1" th:value="${auditorium.id}"
									        th:text="${auditorium.name}">G-01
									</option>
								</select>
								<div class="invalid-feedback">Auditorium required</div>
							</div>
						</div>

						<input type="hidden" name="scheduleId" value="" th:value="${schedule.id}">

						<!--Submit-->

						<div class="modal-footer">
							<button type="submit" class="btn btn-outline-primary">Change</button>
						</div>

					</div>
				</form>
			</div>

		</div>
	</div>
</div>

<div th:replace="layout :: scheduleFormManagement"></div>

<div th:replace="layout :: navbar"></div>

<div class="container">
	<div class="row align-items-center">
		<div class="col">

			<!-- Alert Success -->
			<div th:if="${!successAlert.isEmpty()}" class="alert alert-dismissible alert-success">
				<button type="button" class="close" data-dismiss="alert">&times;</button>
				<h4 class="alert-heading">
					<i class="fas fa-check-circle"></i>
					Done!
				</h4>
				<p th:text="${successAlert}" class="mb-0">Message</p>
			</div>

			<!-- Alert Error -->
			<div th:if="${!errorAlert.isEmpty()}" class="alert alert-dismissible alert-danger">
				<button type="button" class="close" data-dismiss="alert">&times;</button>
				<h4 class="alert-heading">
					<i class="fas fa-exclamation-circle"></i>
					Error!
				</h4>
				<p th:text="${errorAlert}" class="mb-0">Message</p>
			</div>

			<h3>Schedule item:</h3>
			<div class="row align-items-center">
				<div class="col-8">
					<div class="row">
						<div class="col-3">
							<span>Date:</span>
						</div>
						<div class="col">
							<span th:text="${@semesterCalendar.getDayDescription(schedule.date)}">Jan 01, 2020</span>
						</div>
					</div>
					<div class="row">
						<div class="col-3">
							<span>Day:</span>
						</div>
						<div class="col">
							<span th:text="${schedule.day}">Monday</span>
						</div>
					</div>
					<div class="row">
						<div class="col-3">
							<span>Period:</span>
						</div>
						<div class="col">
							<span th:text="${schedule.period.toString()}">FIRST 08:30-09:45</span>
						</div>
					</div>
					<div class="row">
						<div class="col-3">
							<span>Auditorium:</span>
						</div>
						<div class="col">
							<span th:text="${schedule.auditorium.name}">A-01</span>
						</div>
					</div>
					<div class="row">
						<div class="col-3">
							<span>Course:</span>
						</div>
						<div class="col">
							<span th:text="${schedule.course.name}">Dark Magic Against Defense Against Dark Magic</span>
						</div>
					</div>
					<div class="row">
						<div class="col-3">
							<span>Group:</span>
						</div>
						<div class="col">
							<span th:text="${schedule.group.name}">G-01</span>
						</div>
					</div>
					<div class="row">
						<div class="col-3">
							<span>Professor:</span>
						</div>
						<div class="col">
							<span th:text="${schedule.professor.fullName}">Some really long professor name that might not fit</span>
						</div>
					</div>
				</div>
				<div th:unless="${professors.isEmpty()} or ${auditoriums.isEmpty()}" class="col-4">
					<button type="button" class="btn btn-outline-warning" data-toggle="modal"
					        data-target="#change-schedule-modal">
						Change both professor and auditorium
					</button>
				</div>
			</div>

			<!-- Professors -->
			<hr class="my-4">
			<h1>
				Available professors
				<button th:unless="${professors.isEmpty()}" type="button" class="btn btn-outline-warning ml-4"
				        data-toggle="modal" data-target="#substitute-professor-modal">
					Substitute
				</button>
			</h1>
			<hr class="my-2">

			<p th:if="${professors.isEmpty()}">None available for this period.</p>

			<!-- List of professors -->
			<div th:unless="${professors.isEmpty()}" class="student-select-container shadow">
				<div class="list-group">

					<!-- Each professor	-->
					<div th:each="professor : ${professors}" class="schedule-row no-border">

						<div class="col list-group-item d-flex justify-content-between">

							<div>
								<span th:text="'ID: ' + *{professor.id}" class="badge badge-pill badge-light">ID: 1</span>
								<span th:text="*{professor.fullName}" class="pl-2">Name One</span>
							</div>
						</div>

					</div>

				</div>
			</div>

			<!-- Auditoriums -->
			<hr class="my-4">
			<h1>
				Available auditoriums
				<button th:unless="${auditoriums.isEmpty()}" type="button" class="btn btn-outline-warning ml-4"
				        data-toggle="modal" data-target="#change-auditorium-modal">
					Move
				</button>
			</h1>
			<hr class="my-2">

			<p th:if="${auditoriums.isEmpty()}">None available for this period.</p>

			<!-- List of auditoriums -->
			<div th:unless="${auditoriums.isEmpty()}" class="student-select-container shadow">
				<div class="list-group">

					<!-- Each auditorium	-->
					<div th:each="auditorium : ${auditoriums}" class="schedule-row no-border">

						<div class="col list-group-item d-flex justify-content-between">

							<div>
								<span th:text="'ID: ' + *{auditorium.id}" class="badge badge-pill badge-light">ID: 1</span>
								<span th:text="*{auditorium.name}" class="pl-2">Name One</span>
							</div>
						</div>

					</div>

				</div>
			</div>


		</div>
	</div>
</div>

<div th:replace="layout :: scripts"></div>

</body>
</html>