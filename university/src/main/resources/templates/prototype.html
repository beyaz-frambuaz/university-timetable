<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<meta name="viewport"
	      content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<link href="../static/favicon.ico" rel="icon">
	<link href="../static/bootstrap.css" rel="stylesheet">
	<link href="../static/bootstrap-datepicker.css" rel="stylesheet">

	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.js"></script>

	<title>Prototype</title>
</head>
<body>

<!--Modal schedule viewing options-->
<div class="modal fade" id="scheduleModal" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">

			<!--Header-->
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalCenterTitle">Schedule
					viewing options
				</h5>
				<button type="button" class="close" data-dismiss="modal"
				        aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>

			<!--Body-->
			<div class="modal-body">
				<h4>Fall Semester</h4>
				<p>September 7 - December 11, 2020</p>

				<form class="needs-validation" id="form" action="" novalidate>
					<div class="container">

						<div class="row align-items-center">
							<div class="form-group col-sm-4">
								Range:
							</div>

							<div class="form-group has-danger col-sm-6">
								<div class="custom-control custom-radio">
									<input type="radio" id="Radio1" name="scheduleOption" class="custom-control-input"
									       value="date"
									       checked required>
									<label class="custom-control-label" for="Radio1">Specific date</label>
								</div>
								<br>
								<div class="custom-control custom-radio">
									<input type="radio" id="Radio2" name="scheduleOption" class="custom-control-input"
									       value="week"
									       required>
									<label class="custom-control-label" for="Radio2">Semester week</label>
								</div>
								<br>
								<div class="custom-control custom-radio">
									<input type="radio" id="Radio3" name="scheduleOption" class="custom-control-input"
									       value="month"
									       required>
									<label class="custom-control-label" for="Radio3">Entire month</label>
								</div>
							</div>
						</div>

						<div class="row align-items-center">
							<div class="form-group col-sm-4">
								Date in range:
							</div>

							<div class="form-group has-danger col-sm-6">
								<input type="text" class="form-control invalid" id="datepickerDay" name="date"
								       placeholder="Select a date" autocomplete="off"
								       required>
								<div class="invalid-feedback">
									Please choose a date
								</div>
							</div>
						</div>

						<br>
						<div class="form-group">
							<div class="custom-control custom-switch">
								<input type="checkbox" class="custom-control-input" name="filterSchedule" id="filterSchedule"
								       checked="">
								<label class="custom-control-label" for="filterSchedule">Show only my schedule</label>
							</div>
						</div>

					</div>

					<!--Submit-->

					<div class="modal-footer">
						<button type="submit" class="btn btn-outline-primary" id="submitSchedule">Allons-y!</button>
					</div>

				</form>

			</div>
		</div>
	</div>
</div>


<!--TOP navigation bar-->
<nav class="navbar fixed-top navbar-expand-md navbar-dark bg-primary">

	<!--Role dropdown-->
	<div class="dropdown">
		<a class="dropdown-toggle" data-toggle="dropdown" href="#"
		   role="button" aria-haspopup="true" aria-expanded="false">
			<img src="../static/favicon-32x32.png" width="30" height="30"
			     class="d-inline-block align-top" alt=""></a>
		<div class="dropdown-menu">
			<a class="dropdown-item disabled" href="#">Tools for</a>
			<div class="dropdown-divider"></div>
			<a class="dropdown-item" href="#" data-toggle="tooltip"
			   data-placement="right" data-container="body"
			   title="Student-specific schedule viewing options">Students</a>
			<a class="dropdown-item" href="#" data-toggle="tooltip"
			   data-placement="right" data-container="body"
			   title="Schedule and course viewing options for faculty">Faculty</a>
			<a class="dropdown-item" href="#" data-toggle="tooltip"
			   data-placement="right" data-container="body"
			   title="Full rage of university and timetable management tools">Management</a>
		</div>
	</div>

	<!--Brand-->
	<a class="navbar-brand" href="#">Timetable</a>
	<!--Role-->
	<span class="navbar-text flex-grow-1">for Prototype</span>
	<button class="navbar-toggler" type="button" data-toggle="collapse"
	        data-target="#navbarColor01" aria-controls="navbarColor01"
	        aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button>

	<!--Menu Items-->
	<div class="collapse navbar-collapse navbar-nav mr-auto justify-content-end"
	     id="navbarColor01">


		<div class="nav-item dropdown">
			<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#"
			   role="button" aria-haspopup="true" aria-expanded="false">
				University</a>
			<div class="dropdown-menu" style="">
				<a class="dropdown-item" href="#">Students</a>
				<a class="dropdown-item" href="#">Faculty</a>
				<a class="dropdown-item" href="#">Auditoriums</a>
				<a class="dropdown-item" href="#">Courses</a>
				<a class="dropdown-item" href="#">Groups</a>
			</div>
		</div>

		<div class="nav-item">
			<a class="nav-link" href="#" data-toggle="modal"
			   data-target="#scheduleModal">Schedule for...</a>
		</div>

		<div class="nav-item">
			<a class="nav-link" href="#">Two-week schedule</a>
		</div>
	</div>
</nav>

<div class="container">
	<div class="row">
		<div class="col">

			<h1 th:text="${student.fullName}">Hello, student!</h1>

			<hr class="my-4">

			<h1 th:text="${filtered}? 'Your schedule' : 'Entire schedule'">Schedule</h1>
			<h6 th:text="'Month of ' + ${monthDescription}">For month ...</h6>
			<p th:text="${monthSchedule.isEmpty()}? 'No classes!' : _" class="text-warning"></p>
			<br>


			<div>
				<!--Header-->
				<div class="schedule-row schedule-header shadow">

					<div class="col-1">Period</div>
					<div class="col">MON <small class="text-muted">(09.07.20)</small></div>
					<div class="col">TUE <small class="text-muted">(09.08.20)</small></div>
					<div class="col">WED <small class="text-muted">(09.09.20)</small></div>
					<div class="col">THU <small class="text-muted">(09.10.20)</small></div>
					<div class="col">FRI <small class="text-muted">(09.11.20)</small></div>
				</div>
				<!--Body-->
				<div class="schedule-container shadow rounded">
					<div class="schedule-background">
						<span class="col-1 d-flex justify-content-center">W</span>
						<span class="col-1 d-flex justify-content-center">e</span>
						<span class="col-1 d-flex justify-content-center">e</span>
						<span class="col-1 d-flex justify-content-center">k</span>
						<span th:text="${@semesterCalendarUtils.getSemesterWeekNumber(${date})}"
						      class="col-1 d-flex justify-content-center pt-2">14</span>
					</div>

					<div class="schedule-body">

						<div th:each="periodSchedule : ${weekSchedule}" class="schedule-row">

							<!--Period-->
							<div class="schedule-period col-1">
								<span th:text="*{periodSchedule.getKey().getTime()}">8:15-9:45</span>
							</div>

							<!--Monday-->
							<div class="schedule col px-1">
								<ul th:each="schedule : *{periodSchedule.getValue().?[day == T(java.time.DayOfWeek).MONDAY]}"
								    class="list-group">
									<li class="list-group-item align-items-center">
										<div class="d-flex justify-content-between mb-1">
											<span th:text="*{schedule.auditorium.name}" class="badge badge-pill badge-primary">A-02
											</span>
											<span th:text="*{schedule.group.name}" class="badge badge-pill badge-secondary">
												G-02</span>
										</div>
										<p class="text-muted mb-1">
											<small th:text="*{schedule.course.name}">Course</small>
										</p>
										<small th:text="*{schedule.professor.fullName}">Professor</small>
									</li>
								</ul>
							</div>
							<!--Tuesday-->
							<div class="schedule col px-1">
								<ul th:each="schedule : *{periodSchedule.getValue().?[day == T(java.time.DayOfWeek).TUESDAY]}"
								    class="list-group">
									<li class="list-group-item align-items-center">
										<div class="d-flex justify-content-between mb-1">
											<span th:text="*{schedule.auditorium.name}" class="badge badge-pill badge-primary">A-02
											</span>
											<span th:text="*{schedule.group.name}" class="badge badge-pill badge-secondary">
												G-02</span>
										</div>
										<p class="text-muted mb-1">
											<small th:text="*{schedule.course.name}">Course</small>
										</p>
										<small th:text="*{schedule.professor.fullName}">Professor</small>
									</li>
								</ul>
							</div>
							<!--Wednesday-->
							<div class="schedule col px-1">
								<ul th:each="schedule : *{periodSchedule.getValue().?[day == T(java.time.DayOfWeek).WEDNESDAY]}"
								    class="list-group">
									<li class="list-group-item align-items-center">
										<div class="d-flex justify-content-between mb-1">
											<span th:text="*{schedule.auditorium.name}" class="badge badge-pill badge-primary">A-02
											</span>
											<span th:text="*{schedule.group.name}" class="badge badge-pill badge-secondary">
												G-02</span>
										</div>
										<p class="text-muted mb-1">
											<small th:text="*{schedule.course.name}">Course</small>
										</p>
										<small th:text="*{schedule.professor.fullName}">Professor</small>
									</li>
								</ul>
							</div>
							<!--Thursday-->
							<div class="schedule col px-1">
								<ul th:each="schedule : *{periodTemplates.getValue().?[day == T(java.time.DayOfWeek).THURSDAY]}"
								    class="list-group">
									<li class="list-group-item align-items-center">
										<div class="d-flex justify-content-between mb-1">
											<span th:text="*{schedule.auditorium.name}" class="badge badge-pill badge-primary">A-02
											</span>
											<span th:text="*{schedule.group.name}" class="badge badge-pill badge-secondary">
												G-02</span>
										</div>
										<p class="text-muted mb-1">
											<small th:text="*{schedule.course.name}">Course</small>
										</p>
										<small th:text="*{schedule.professor.fullName}">Professor</small>
									</li>
								</ul>
							</div>
							<!--Friday-->
							<div class="schedule col px-1">
								<ul th:each="schedule : *{periodTemplates.getValue().?[day == T(java.time.DayOfWeek).FRIDAY]}"
								    class="list-group">
									<li class="list-group-item align-items-center">
										<div class="d-flex justify-content-between mb-1">
											<span th:text="*{schedule.auditorium.name}" class="badge badge-pill badge-primary">A-02
											</span>
											<span th:text="*{schedule.group.name}" class="badge badge-pill badge-secondary">
												G-02</span>
										</div>
										<p class="text-muted mb-1">
											<small th:text="*{schedule.course.name}">Course</small>
										</p>
										<small th:text="*{schedule.professor.fullName}">Professor</small>
									</li>
								</ul>
							</div>
						</div>

					</div>

				</div>
			</div>



		</div>
	</div>
</div>

<script type="text/javascript">

    // datepicker
    $(document).ready(function () {
        $('#datepickerDay').datepicker({
            autoclose: true,
            weekStart: '1',
            format: 'yyyy-mm-dd',
            daysOfWeekDisabled: [0, 6],
            startDate: '2020-09-07',
            endDate: '2020-12-11'
        });
    });

    // tooltips
    $(document).ready(function () {
        $('[data-toggle="tooltip"]').tooltip();
    });

    // validation
    (function () {
        'use strict';
        window.addEventListener('load', function () {
            var forms = document.getElementsByClassName('needs-validation');
            var validation = Array.prototype.filter.call(forms, function (form) {
                form.addEventListener('submit', function (event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();
</script>

</body>
</html>